webpackJsonp([10],{TW5X:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("LGwj"),i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:e.title,visible:e.addDialogVisible,width:"40%"},on:{"update:visible":function(t){e.addDialogVisible=t}}},[a("div",{staticClass:"ui-box leave_dialog"},[a("el-form",{ref:"formPerms",attrs:{model:e.permsItem,"label-width":"80px",rules:e.formRule}},[a("el-form-item",{attrs:{label:"名称",prop:"name"}},[a("el-input",{staticClass:"item_reset",attrs:{size:"mini"},model:{value:e.permsItem.name,callback:function(t){e.$set(e.permsItem,"name",t)},expression:"permsItem.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"父级路由"}},[a("el-select",{staticClass:"item_reset",attrs:{placeholder:"父级路由",size:"mini",clearable:""},model:{value:e.permsItem.parentId,callback:function(t){e.$set(e.permsItem,"parentId",t)},expression:"permsItem.parentId"}},[a("el-option",{attrs:{label:"无",value:"0"}}),e._v(" "),e._l(e.parentRoute,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})],2)],1),e._v(" "),a("el-form-item",{attrs:{label:"api"}},[a("el-input",{staticClass:"item_reset",attrs:{size:"mini"},model:{value:e.permsItem.perms,callback:function(t){e.$set(e.permsItem,"perms",t)},expression:"permsItem.perms"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"排序"}},[a("el-input",{staticClass:"item_reset",attrs:{size:"mini"},model:{value:e.permsItem.orderNum,callback:function(t){e.$set(e.permsItem,"orderNum",t)},expression:"permsItem.orderNum"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"url路径",prop:"url"}},[a("el-input",{staticClass:"item_reset",attrs:{size:"mini"},model:{value:e.permsItem.url,callback:function(t){e.$set(e.permsItem,"url",t)},expression:"permsItem.url"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"状态"}},[a("el-select",{staticClass:"item_reset",attrs:{placeholder:"请选择",size:"mini"},model:{value:e.permsItem.status,callback:function(t){e.$set(e.permsItem,"status",t)},expression:"permsItem.status"}},[a("el-option",{attrs:{label:"禁用",value:"2"}}),e._v(" "),a("el-option",{attrs:{label:"启用",value:"1"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"描述"}},[a("el-input",{staticClass:"item_reset",attrs:{size:"mini"},model:{value:e.permsItem.description,callback:function(t){e.$set(e.permsItem,"description",t)},expression:"permsItem.description"}})],1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:function(t){e.addDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.submit}},[e._v("确 定")])],1)])},staticRenderFns:[]};var l=a("VU/8")({name:"addItem",props:{permsItem:{}},data:function(){return{formRule:{name:[{required:!0,message:"请输入名称",trigger:"blur"}],url:[{required:!0,message:"请输入路径",trigger:"blur"}]},addDialogVisible:!1,title:"",parentRoute:[]}},mounted:function(){this.initParentRoute()},methods:{submit:function(){var e=this;this.$refs.formPerms.validate(function(t){t&&e.$emit("submit")})},openWindow:function(e){this.title=e,this.addDialogVisible=!0},initParentRoute:function(){this.parentRoute=this.$getGlobal.getItem("routers")}}},i,!1,function(e){a("VZ2/")},null,null).exports,r={name:"permissionsList",components:{pageBox:s.a,addItem:l},data:function(){return{dataList:[],exportList:[],test:"1",permsItem:{name:"",parentId:"0",url:"",perms:"",status:"1",description:"",type:"0",orderNum:"0"},tabLoading:!1,params:{permissionId:"",name:"",url:"",perms:"",pageNum:1,pageSize:20},total:0}},created:function(){this.getData()},methods:{getData:function(){var e=this;post("/pms_api/permission/list",this.params).then(function(t){e.dataList=t.rows,e.total=t.total,e.tabLoading=!1}).catch(function(t){console.log(t),e.tabLoading=!1})},addItem:function(){var e=this;this.tabLoading=!0,this.permsItem.type="0",0!=this.permsItem.parentId&&(this.permsItem.type="2"),post("/pms_api/permission/add",this.permsItem).then(function(t){e.$refs.addPerm.addDialogVisible=!1,e.getData()}).catch(function(e){console.log(e)})},changPageNum:function(e){this.params.pageNum=e,this.getData()},open:function(){this.$refs.addPerm.openWindow("新增路由")},checkDetail:function(e){this.$router.push({path:"/permissionsDetail",query:{title:e.name,id:e.permissionId}})},deleteItem:function(e){var t=this;post("/pms_api/permission/delete",{permissionId:e.permissionId}).then(function(e){t.getData()}).catch(function(e){console.log(e)})},handleSelectionChange:function(e){this.exportList=e},exportExcel:function(){this.$message.warning("抱歉，无法导出")},cellStyle:function(e){e.row,e.colum,e.rowIndex,e.columIndex;return"text-align: center"},rowClass:function(e){e.row,e.rowIndex;return"text-align: center"}}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("page-box",[a("div",{staticClass:"ui-search-box",attrs:{slot:"search-form"},slot:"search-form"},[a("el-form",{staticClass:"ui-search-form",attrs:{"label-width":"120px"}},[a("el-form-item",{attrs:{label:"权限id"}},[a("el-input",{staticClass:"ui-item-reset",attrs:{size:"mini",clearable:""},model:{value:e.params.permissionId,callback:function(t){e.$set(e.params,"permissionId",t)},expression:"params.permissionId"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"名称"}},[a("el-input",{staticClass:"ui-item-reset",attrs:{size:"mini",clearable:""},model:{value:e.params.name,callback:function(t){e.$set(e.params,"name",t)},expression:"params.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"路径url"}},[a("el-input",{staticClass:"ui-item-reset",attrs:{size:"mini",clearable:""},model:{value:e.params.url,callback:function(t){e.$set(e.params,"url",t)},expression:"params.url"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"接口标识"}},[a("el-input",{staticClass:"ui-item-reset",attrs:{size:"mini",clearable:""},model:{value:e.params.perms,callback:function(t){e.$set(e.params,"perms",t)},expression:"params.perms"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"每页数据"}},[a("el-select",{staticClass:"ui-item-reset",attrs:{size:"mini",clearable:""},model:{value:e.params.pageSize,callback:function(t){e.$set(e.params,"pageSize",t)},expression:"params.pageSize"}},[a("el-option",{attrs:{label:"5",value:5}}),e._v(" "),a("el-option",{attrs:{label:"10",value:10}}),e._v(" "),a("el-option",{attrs:{label:"20",value:20}})],1)],1)],1),e._v(" "),a("div",{staticClass:"ui-search-btus"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.getData}},[e._v("搜索")])],1)],1),e._v(" "),a("div",{staticClass:"ui-list ui-box",attrs:{slot:"list-box"},slot:"list-box"},[a("div",{staticClass:"box-header ui-list-header"},[a("div",[e._v("权限列表")]),e._v(" "),a("div",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.exportExcel}},[e._v("导出")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.open}},[e._v("新增")])],1)]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tabLoading,expression:"tabLoading"}],attrs:{data:e.dataList,"cell-style":e.cellStyle,"header-cell-style":e.rowClass},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{prop:"permissionId",label:"权限id"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"url",label:"路径"}}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(e){return[1==e.row.status?a("el-button",{attrs:{type:"success",icon:"el-icon-check",circle:"",size:"mini"}}):a("el-button",{attrs:{type:"danger",icon:"el-icon-close",circle:"",size:"mini"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"description",label:"描述"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"updateTime",label:"更新时间","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.checkDetail(t.row)}}},[e._v("详情")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.deleteItem(t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("el-pagination",{staticClass:"ui-pagination",attrs:{layout:"total, prev, pager, next","current-page":this.params.pageNum,"page-size":this.params.pageSize,total:e.total},on:{"current-change":e.changPageNum}}),e._v(" "),a("add-item",{ref:"addPerm",attrs:{permsItem:e.permsItem},on:{"update:permsItem":function(t){e.permsItem=t},"update:perms-item":function(t){e.permsItem=t},submit:e.addItem}})],1)])},staticRenderFns:[]};var o=a("VU/8")(r,n,!1,function(e){a("YiKt")},"data-v-61b7af89",null);t.default=o.exports},"VZ2/":function(e,t){},YiKt:function(e,t){}});
//# sourceMappingURL=10.c2118745fa32c7d5da34.js.map