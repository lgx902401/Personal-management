webpackJsonp([7],{LWV5:function(e,t){},ciXA:function(e,t){},tVh0:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("LGwj"),l={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-dialog",{attrs:{title:e.title,visible:e.addDialogVisible,width:"35%"},on:{"update:visible":function(t){e.addDialogVisible=t}}},[s("div",{staticClass:"ui-box leave_dialog"},[s("el-form",{ref:"formUser",attrs:{model:e.userItem,"label-width":"80px",rules:e.formRule}},[s("el-form-item",{attrs:{label:"名称",prop:"username"}},[s("el-input",{staticClass:"item_reset",attrs:{size:"mini"},model:{value:e.userItem.username,callback:function(t){e.$set(e.userItem,"username",t)},expression:"userItem.username"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"密码",prop:"password"}},[s("el-input",{staticClass:"item_reset",attrs:{size:"mini",type:"password","show-password":""},model:{value:e.userItem.password,callback:function(t){e.$set(e.userItem,"password",t)},expression:"userItem.password"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[s("el-input",{staticClass:"item_reset",attrs:{size:"mini"},model:{value:e.userItem.email,callback:function(t){e.$set(e.userItem,"email",t)},expression:"userItem.email"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"手机",prop:"phone"}},[s("el-input",{staticClass:"item_reset",attrs:{size:"mini"},model:{value:e.userItem.phone,callback:function(t){e.$set(e.userItem,"phone",t)},expression:"userItem.phone"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"性别"}},[s("el-select",{staticClass:"item_reset",attrs:{placeholder:"请选择",size:"mini"},model:{value:e.userItem.sex,callback:function(t){e.$set(e.userItem,"sex",t)},expression:"userItem.sex"}},[s("el-option",{attrs:{label:"男",value:"1"}}),e._v(" "),s("el-option",{attrs:{label:"女",value:"0"}})],1)],1),e._v(" "),s("el-form-item",{attrs:{label:"年龄"}},[s("el-input",{staticClass:"item_reset",attrs:{size:"mini"},model:{value:e.userItem.age,callback:function(t){e.$set(e.userItem,"age",t)},expression:"userItem.age"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"状态"}},[s("el-select",{staticClass:"item_reset",attrs:{placeholder:"请选择",size:"mini"},model:{value:e.userItem.status,callback:function(t){e.$set(e.userItem,"status",t)},expression:"userItem.status"}},[s("el-option",{attrs:{label:"禁用",value:"0"}}),e._v(" "),s("el-option",{attrs:{label:"启用",value:"1"}})],1)],1)],1)],1),e._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{size:"mini"},on:{click:function(t){e.addDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),s("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.submit}},[e._v("确 定")])],1)])},staticRenderFns:[]};var i=s("VU/8")({name:"addItem",props:{userItem:{}},data:function(){return{formRule:{username:[{required:!0,message:"请输入名称",trigger:"blur"}],password:[{required:!0,message:"密码不能为空",trigger:"blur"},{min:4,max:16,message:"密码长度在 4 到 16 个字符",trigger:"blur"},{pattern:/^(?=.*[0-9])(?=.*[a-zA-Z]).{4,16}$/,message:"请输入正确的密码格式:字母开头+数字"}],phone:[{pattern:/^1[3456789]\d{9}$/,message:"请输入正确的电话格式"}],email:[{pattern:/^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/,message:"请输入正确的邮箱格式",trigger:"blur"}]},addDialogVisible:!1,title:""}},methods:{submit:function(){var e=this;this.$refs.formUser.validate(function(t){t&&e.$emit("submit")})},openWindow:function(e){this.title=e,this.addDialogVisible=!0}}},l,!1,function(e){s("LWV5")},null,null).exports,r={name:"roleList",components:{pageBox:a.a,addItem:i},data:function(){return{dataList:[],exportList:[],test:"1",userItem:{username:"",password:"",email:"",phone:"",sex:"1",age:"",status:"1"},params:{username:"",email:"",phone:"",sex:""}}},created:function(){this.getData()},methods:{getData:function(){var e=this;post("/pms_api/user/list",this.params).then(function(t){e.dataList=t.rows}).catch(function(e){console.log(e)})},addItem:function(){var e=this;post("/pms_api/user/add",this.userItem).then(function(t){e.$refs.addPerm.addDialogVisible=!1,console.log("res",t),e.getData()}).catch(function(e){console.log(e)}),this.$refs.addPerm.addDialogVisible=!1},open:function(){this.$refs.addPerm.openWindow("新增用户")},checkDetail:function(e){this.$router.push({path:"/userDetail",query:{title:e.name,id:e.userId}})},deleteItem:function(e){var t=this;post("/pms_api/user/delete",{userId:e.userId}).then(function(e){t.getData()}).catch(function(e){console.log(e)})},handleSelectionChange:function(e){this.exportList=e},exportExcel:function(){var e={2:"女",1:"男"};if(this.exportList.length>0){this.exportList.forEach(function(t){t.sexName=e[t.sex]});var t=this.exportList;this.$getGlobal.exportFun("用户列表",["ID","用户id","用户名","性别","年龄","邮箱","手机号","创建时间","修改时间","状态","说明","密钥"],["id","userId","username","sexname","age","email","phone","createTime","updateTime","status","description","salt"],t)}else this.$message.error("请先选择需要导出的列表项")},cellStyle:function(e){e.row,e.colum,e.rowIndex,e.columIndex;return"text-align: center"},rowClass:function(e){e.row,e.rowIndex;return"text-align: center"}}},o={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("page-box",[s("div",{staticClass:"ui-search-box",attrs:{slot:"search-form"},slot:"search-form"},[s("el-form",{staticClass:"ui-search-form",attrs:{"label-width":"120px"}},[s("el-form-item",{attrs:{label:"名称"}},[s("el-input",{staticClass:"ui-item-reset",attrs:{size:"mini",clearable:""},model:{value:e.params.username,callback:function(t){e.$set(e.params,"username",t)},expression:"params.username"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"手机"}},[s("el-input",{staticClass:"ui-item-reset",attrs:{size:"mini",clearable:""},model:{value:e.params.phone,callback:function(t){e.$set(e.params,"phone",t)},expression:"params.phone"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"邮箱"}},[s("el-input",{staticClass:"ui-item-reset",attrs:{size:"mini",clearable:""},model:{value:e.params.email,callback:function(t){e.$set(e.params,"email",t)},expression:"params.email"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"性别"}},[s("el-select",{staticClass:"ui-item-reset",attrs:{placeholder:"请选择",size:"mini",clearable:""},model:{value:e.params.sex,callback:function(t){e.$set(e.params,"sex",t)},expression:"params.sex"}},[s("el-option",{attrs:{label:"男",value:"1"}}),e._v(" "),s("el-option",{attrs:{label:"女",value:"2"}})],1)],1)],1),e._v(" "),s("div",{staticClass:"ui-search-btus"},[s("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.getData}},[e._v("搜索")])],1)],1),e._v(" "),s("div",{staticClass:"ui-list ui-box",attrs:{slot:"list-box"},slot:"list-box"},[s("div",{staticClass:"box-header ui-list-header"},[s("div",[e._v("用户列表")]),e._v(" "),s("div",[s("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.exportExcel}},[e._v("导出")]),e._v(" "),s("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.open}},[e._v("新增")])],1)]),e._v(" "),s("el-table",{attrs:{data:e.dataList,"cell-style":e.cellStyle,"header-cell-style":e.rowClass},on:{"selection-change":e.handleSelectionChange}},[s("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),s("el-table-column",{attrs:{prop:"userId",label:"用户id"}}),e._v(" "),s("el-table-column",{attrs:{prop:"username",label:"用户名"}}),e._v(" "),s("el-table-column",{attrs:{prop:"email",label:"邮箱"}}),e._v(" "),s("el-table-column",{attrs:{prop:"sex",label:"性别"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.sex?s("span",[e._v("男")]):s("span",[e._v("女")])]}}])}),e._v(" "),s("el-table-column",{attrs:{prop:"status",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(e){return[1==e.row.status?s("el-button",{attrs:{type:"success",icon:"el-icon-check",circle:"",size:"mini"}}):s("el-button",{attrs:{type:"danger",icon:"el-icon-close",circle:"",size:"mini"}})]}}])}),e._v(" "),s("el-table-column",{attrs:{prop:"createTime",label:"创建时间","show-overflow-tooltip":""}}),e._v(" "),s("el-table-column",{attrs:{prop:"updateTime",label:"更新时间","show-overflow-tooltip":""}}),e._v(" "),s("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{size:"mini"},on:{click:function(s){return e.checkDetail(t.row)}}},[e._v("详情")]),e._v(" "),s("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(s){return e.deleteItem(t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),s("add-item",{ref:"addPerm",attrs:{userItem:e.userItem},on:{"update:userItem":function(t){e.userItem=t},"update:user-item":function(t){e.userItem=t},submit:e.addItem}})],1)])},staticRenderFns:[]};var n=s("VU/8")(r,o,!1,function(e){s("ciXA")},"data-v-4a8d381d",null);t.default=n.exports}});
//# sourceMappingURL=7.ce6571ebd675e2112274.js.map